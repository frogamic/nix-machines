### Begin media key control

set $wobsock /tmp/wob-sway-sock

exec playerctld
exec rm -f $wobsock && mkfifo $wobsock \
	&& tail -f $wobsock \
		| wob --anchor bottom \
					--width 768 \
					--height 20 \
					--margin 20 \
					--offset 0 \
					--border 1 \
					--padding 2 \
					--border-color '#AAEEEEEE' \
					--bar-color '#AAFFFFFF' \
					--background-color '#AA000000'

bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous

# Mute
bindsym --locked XF86AudioMute exec pamixer --toggle-mute && ( pamixer --get-mute && echo 0 > $wobsock ) || pamixer --get-volume > $wobsock

# Overload volume keys for device switching
bindsym --locked $mod+XF86AudioRaiseVolume exec notify-send -u low -t 1500 -i audio-card "Next Audio Device" "$(pacycle next sink)"
bindsym --locked $mod+XF86AudioLowerVolume exec notify-send -u low -t 1500 -i audio-card "Previous Audio Device" "$(pacycle prev sink)"
bindsym --locked Ctrl+$mod+XF86AudioRaiseVolume exec notify-send -u low -t 1500 -i audio-input-microphone "Next Audio Input" "$(pacycle next source)"
bindsym --locked Ctrl+$mod+XF86AudioLowerVolume exec notify-send -u low -t 1500 -i audio-input-microphone "Previous Audio Input" "$(pacycle prev source)"

# Ctrl for small volume change
bindsym --locked Ctrl+XF86AudioRaiseVolume exec pamixer -ui 1 && pamixer --get-volume > $wobsock
bindsym --locked Ctrl+XF86AudioLowerVolume exec pamixer -ud 1 && pamixer --get-volume > $wobsock
# no mod for regular volume change
bindsym --locked XF86AudioRaiseVolume exec pamixer -ui 5 && pamixer --get-volume > $wobsock
bindsym --locked XF86AudioLowerVolume exec pamixer -ud 5 && pamixer --get-volume > $wobsock
# Shift for big volume change
bindsym --locked Shift+XF86AudioRaiseVolume exec pamixer -ui 10 && pamixer --get-volume > $wobsock
bindsym --locked Shift+XF86AudioLowerVolume exec pamixer -ud 10 && pamixer --get-volume > $wobsock

### backlight control
bindsym --locked Ctrl+XF86MonBrightnessUp exec backlightctl inc 2 > $wobsock
bindsym --locked Ctrl+XF86MonBrightnessDown exec backlightctl dec 2 > $wobsock

bindsym --locked XF86MonBrightnessUp exec backlightctl inc 5 > $wobsock
bindsym --locked XF86MonBrightnessDown exec backlightctl dec 5 > $wobsock

bindsym --locked Shift+XF86MonBrightnessUp exec backlightctl inc 10 > $wobsock
bindsym --locked Shift+XF86MonBrightnessDown exec backlightctl dec 10 > $wobsock
